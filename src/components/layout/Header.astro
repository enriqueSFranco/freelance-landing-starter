---
import ButtonMobileMenu from "@components/ui/desing-system/ButtonMobileMenu.astro";
import MobileMenu from "../ui/MobileMenu.astro";
import type { MenuItem } from "@lib/types/menuItem";
import { Image } from "astro:assets";

interface Props {
  items: MenuItem[];
}

const { items } = Astro.props;
---

<header
  id="main-header"
  class="fixed top-0 left-0 w-full h-20 md:h-24 z-200 flex items-center transition-all duration-700 border-b border-white/5 bg-transparent"
>
  <div
    class="container mx-auto px-6 md:px-12 flex items-center justify-between w-full"
  >
    <a
      href="/"
      class="header-element group relative z-110 flex items-center"
      aria-label="Inicio"
    >
      <div class="relative overflow-hidden flex items-center justify-center">
        <Image
          width={600}
          height={800}
          src="ui/branding/vintage-barber-logo.png"
          class="w-16 h-auto md:w-20 lg:w-24 object-contain brightness-0 invert opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700 ease-out"
          alt="Logo Legacy Barber"
        />
      </div>
    </a>

    <nav
      id="desktop-menu"
      class="hidden lg:flex items-center relative py-1.5 px-1.5 rounded-full border border-white/5 bg-black/20 backdrop-blur-md"
    >
      {
        items.map((item) => (
          <a
            href={item.href}
            data-section={item.href.replace("#", "")}
            class="nav-link relative z-10 px-5 py-2 text-[9px] uppercase tracking-[0.4em] font-bold text-white/30 transition-colors duration-500"
          >
            {item.label}
          </a>
        ))
      }
      <span
        id="nav-indicator"
        class="absolute top-1.5 bottom-1.5 left-0 bg-white/10 rounded-full border border-white/10 opacity-0 pointer-events-none transition-all duration-500 ease-[cubic-bezier(0.23,1,0.32,1)]"
      ></span>
    </nav>

    <div class="flex items-center gap-4 relative z-110">
      <button
        class="header-element btn-reservar group relative px-6 py-2 border border-gold-600/30 bg-transparent overflow-hidden"
      >
        <span
          class="relative z-10 text-[9px] uppercase tracking-[0.3em] font-bold text-gold-500 group-hover:text-black-pure transition-colors"
          >Reservar</span
        >
        <div
          class="absolute inset-0 bg-gold-500 translate-y-full group-hover:translate-y-0 transition-transform duration-500"
        >
        </div>
      </button>

      <div class="lg:hidden flex items-center justify-center">
        <ButtonMobileMenu />
      </div>
    </div>
  </div>
</header>

<MobileMenu items={items} />

<script>
  import { initNavigation } from "@scripts/navigation/initNavigation";

  // Ejecutar al cargar
  initNavigation();

  // Ejecutar si usas ViewTransitions de Astro
  document.addEventListener("astro:after-swap", initNavigation);
</script>

<style>
  #main-header.menu-active .header-element {
    opacity: 0;
    pointer-events: none;
    transform: translateY(-10px);
  }
  .header-element {
    transition: all 0.4s ease-in-out;
  }

  header {
    animation: sticky-header linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
  }
  @keyframes sticky-header {
    to {
      background: rgba(5, 5, 5, 0.8);
      backdrop-filter: blur(15px);
      height: 5rem;
    }
  }

  @keyframes shrink-logo {
    to {
      width: 3.5rem;
      opacity: 1;
    }
  }

  #main-header img {
    animation: shrink-logo linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
  }
</style>
